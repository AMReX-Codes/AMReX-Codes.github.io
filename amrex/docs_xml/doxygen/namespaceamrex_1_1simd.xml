<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.8" xml:lang="en-US">
  <compounddef id="namespaceamrex_1_1simd" kind="namespace" language="C++">
    <compoundname>amrex::simd</compoundname>
    <innerclass refid="structamrex_1_1simd_1_1Vectorized" prot="public">amrex::simd::Vectorized</innerclass>
    <innernamespace refid="namespaceamrex_1_1simd_1_1stdx">amrex::simd::stdx</innernamespace>
    <sectiondef kind="typedef">
      <memberdef kind="typedef" id="namespaceamrex_1_1simd_1add6621fecc25847a2732965c42392d93" prot="public" static="no">
        <templateparamlist>
          <param>
            <type>int</type>
            <declname>SIMD_WIDTH</declname>
            <defname>SIMD_WIDTH</defname>
            <defval>native_simd_size_real</defval>
          </param>
        </templateparamlist>
        <type><ref refid="group__amrex__arithmetic__types_1ga00d9113947d2ea92bbdbfe7db24d81f2" kindref="member">amrex::Real</ref></type>
        <definition>using amrex::simd::SIMDReal = typedef amrex::Real</definition>
        <argsstring></argsstring>
        <name>SIMDReal</name>
        <qualifiedname>amrex::simd::SIMDReal</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/runner/work/amrex/amrex/Src/Base/AMReX_SIMD.H" line="67" column="5" bodyfile="/home/runner/work/amrex/amrex/Src/Base/AMReX_SIMD.H" bodystart="67" bodyend="-1"/>
      </memberdef>
      <memberdef kind="typedef" id="namespaceamrex_1_1simd_1a945cac56e2e229159839e79047422383" prot="public" static="no">
        <templateparamlist>
          <param>
            <type>int</type>
            <declname>SIMD_WIDTH</declname>
            <defname>SIMD_WIDTH</defname>
            <defval>native_simd_size_particlereal</defval>
          </param>
        </templateparamlist>
        <type><ref refid="group__amrex__arithmetic__types_1ga1bb8e83c724a2a399a0129c904b4f7bd" kindref="member">amrex::ParticleReal</ref></type>
        <definition>using amrex::simd::SIMDParticleReal = typedef amrex::ParticleReal</definition>
        <argsstring></argsstring>
        <name>SIMDParticleReal</name>
        <qualifiedname>amrex::simd::SIMDParticleReal</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/runner/work/amrex/amrex/Src/Base/AMReX_SIMD.H" line="70" column="5" bodyfile="/home/runner/work/amrex/amrex/Src/Base/AMReX_SIMD.H" bodystart="70" bodyend="-1"/>
      </memberdef>
      <memberdef kind="typedef" id="namespaceamrex_1_1simd_1a465ffeeba40e27acff62a2b58078a530" prot="public" static="no">
        <templateparamlist>
          <param>
            <type>typename T_ParticleReal</type>
            <defval>SIMDParticleReal&lt;&gt;</defval>
          </param>
        </templateparamlist>
        <type><ref refid="namespaceamrex_1ad2e8127753e9be0ebf531435c6511937" kindref="member">int</ref></type>
        <definition>using amrex::simd::SIMDInt = typedef int</definition>
        <argsstring></argsstring>
        <name>SIMDInt</name>
        <qualifiedname>amrex::simd::SIMDInt</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/runner/work/amrex/amrex/Src/Base/AMReX_SIMD.H" line="74" column="5" bodyfile="/home/runner/work/amrex/amrex/Src/Base/AMReX_SIMD.H" bodystart="74" bodyend="-1"/>
      </memberdef>
      <memberdef kind="typedef" id="namespaceamrex_1_1simd_1a13bc9efaf58e1af807347f918fff24a9" prot="public" static="no">
        <templateparamlist>
          <param>
            <type>typename T_ParticleReal</type>
            <defval>SIMDParticleReal&lt;&gt;</defval>
          </param>
        </templateparamlist>
        <type>std::uint64_t</type>
        <definition>using amrex::simd::SIMDIdCpu = typedef std::uint64_t</definition>
        <argsstring></argsstring>
        <name>SIMDIdCpu</name>
        <qualifiedname>amrex::simd::SIMDIdCpu</qualifiedname>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/runner/work/amrex/amrex/Src/Base/AMReX_SIMD.H" line="78" column="5" bodyfile="/home/runner/work/amrex/amrex/Src/Base/AMReX_SIMD.H" bodystart="78" bodyend="-1"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="var">
      <memberdef kind="variable" id="namespaceamrex_1_1simd_1a3eedc46ea269765dc7010c48bd8a39d8" prot="public" static="no" constexpr="yes" mutable="no">
        <type>constexpr auto</type>
        <definition>constexpr auto amrex::simd::native_simd_size_real</definition>
        <argsstring></argsstring>
        <name>native_simd_size_real</name>
        <qualifiedname>amrex::simd::native_simd_size_real</qualifiedname>
        <initializer>= 1</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/runner/work/amrex/amrex/Src/Base/AMReX_SIMD.H" line="63" column="20" bodyfile="/home/runner/work/amrex/amrex/Src/Base/AMReX_SIMD.H" bodystart="63" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="namespaceamrex_1_1simd_1acbc41b506c60eca5132aafb04cfbf19f" prot="public" static="no" constexpr="yes" mutable="no">
        <type>constexpr auto</type>
        <definition>constexpr auto amrex::simd::native_simd_size_particlereal</definition>
        <argsstring></argsstring>
        <name>native_simd_size_particlereal</name>
        <qualifiedname>amrex::simd::native_simd_size_particlereal</qualifiedname>
        <initializer>= 1</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/runner/work/amrex/amrex/Src/Base/AMReX_SIMD.H" line="64" column="20" bodyfile="/home/runner/work/amrex/amrex/Src/Base/AMReX_SIMD.H" bodystart="64" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="namespaceamrex_1_1simd_1a54138e232b90d8b36128b4dfd4f90923" prot="public" static="no" constexpr="yes" mutable="no">
        <templateparamlist>
          <param>
            <type>typename T</type>
          </param>
        </templateparamlist>
        <type>constexpr bool</type>
        <definition>constexpr bool amrex::simd::is_vectorized</definition>
        <argsstring></argsstring>
        <name>is_vectorized</name>
        <qualifiedname>amrex::simd::is_vectorized</qualifiedname>
        <initializer>= std::is_base_of_v&lt;detail::InternalVectorized, T&gt;</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Check if a Functor Class works with <ref refid="namespaceamrex_1a4ec5f0c353aec0e3aeefd2628e2d44ff" kindref="member">amrex::ParallelForSIMD</ref></para>
<para><simplesect kind="see"><para><ref refid="structamrex_1_1simd_1_1Vectorized" kindref="compound">amrex::simd::Vectorized</ref> </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/runner/work/amrex/amrex/Src/Base/AMReX_SIMD.H" line="126" column="20" bodyfile="/home/runner/work/amrex/amrex/Src/Base/AMReX_SIMD.H" bodystart="126" bodyend="-1"/>
      </memberdef>
    </sectiondef>
    <sectiondef kind="func">
      <memberdef kind="function" id="namespaceamrex_1_1simd_1a83c898c768cfae013bfd34c9ec548517" prot="public" static="no" constexpr="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <templateparamlist>
          <param>
            <type>typename R</type>
          </param>
          <param>
            <type>typename...</type>
            <declname>Args</declname>
            <defname>Args</defname>
          </param>
        </templateparamlist>
        <type>constexpr bool</type>
        <definition>constexpr bool amrex::simd::is_nth_arg_non_const</definition>
        <argsstring>(R(*)(Args...), int n)</argsstring>
        <name>is_nth_arg_non_const</name>
        <qualifiedname>amrex::simd::is_nth_arg_non_const</qualifiedname>
        <param>
          <type>R(*)(Args...)</type>
        </param>
        <param>
          <type><ref refid="namespaceamrex_1ad2e8127753e9be0ebf531435c6511937" kindref="member">int</ref></type>
          <declname>n</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Check if a function argument is declared as non-const</para>
<para>Use in conjunction with conditional write-back logic from vector registers, e.g.,</para>
<para><programlisting filename=".cpp"><codeline><highlight class="keyword">template</highlight><highlight class="normal">&lt;</highlight><highlight class="keyword">typename</highlight><highlight class="normal"><sp/>T_Real&gt;</highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>compute<sp/>(T_Real<sp/>&amp;<sp/><ref refid="AMReX__Extension_8H_1a97eafbdde3320b2e8981a1d1d3936f58" kindref="member">AMREX_RESTRICT</ref><sp/><ref refid="namespaceamrex_1a8de829410ed15dbc56e4dafc9bc6ea69a9dd4e461268c8034f5c8564e155c67a6" kindref="member">x</ref>,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>T_Real<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>&amp;<sp/><ref refid="AMReX__Extension_8H_1a97eafbdde3320b2e8981a1d1d3936f58" kindref="member">AMREX_RESTRICT</ref><sp/><ref refid="namespaceamrex_1a8de829410ed15dbc56e4dafc9bc6ea69a415290769594460e2e485922904f345d" kindref="member">y</ref>)<sp/>{<sp/>...<sp/>}</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal">part_x.copy_from(&amp;m_part_x[i],<sp/>stdx::element_aligned);</highlight></codeline>
<codeline><highlight class="normal">part_y.copy_from(&amp;m_part_y[i],<sp/>stdx::element_aligned);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal">compute(part_x,<sp/>part_y);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">constexpr</highlight><highlight class="normal"><sp/>(<ref refid="namespaceamrex_1_1simd_1a83c898c768cfae013bfd34c9ec548517" kindref="member">is_nth_arg_non_const</ref>(compute&lt;double&gt;,<sp/>0))</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>part_x.copy_to(&amp;m_part_x[i],<sp/>stdx::element_aligned);</highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">constexpr</highlight><highlight class="normal"><sp/>(<ref refid="namespaceamrex_1_1simd_1a83c898c768cfae013bfd34c9ec548517" kindref="member">is_nth_arg_non_const</ref>(compute&lt;double&gt;,<sp/>1))</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>part_y.copy_to(&amp;m_part_y[i],<sp/>stdx::element_aligned);</highlight></codeline>
</programlisting> </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/runner/work/amrex/amrex/Src/Base/AMReX_SIMD.H" line="149" column="20" bodyfile="/home/runner/work/amrex/amrex/Src/Base/AMReX_SIMD.H" bodystart="149" bodyend="153"/>
      </memberdef>
      <memberdef kind="function" id="namespaceamrex_1_1simd_1aecb850f4517c5fdfadf86c06506366d8" prot="public" static="no" constexpr="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <templateparamlist>
          <param>
            <type>typename C</type>
          </param>
          <param>
            <type>typename R</type>
          </param>
          <param>
            <type>typename...</type>
            <declname>Args</declname>
            <defname>Args</defname>
          </param>
        </templateparamlist>
        <type>constexpr bool</type>
        <definition>constexpr bool amrex::simd::is_nth_arg_non_const</definition>
        <argsstring>(R(C::*)(Args...), int n)</argsstring>
        <name>is_nth_arg_non_const</name>
        <qualifiedname>amrex::simd::is_nth_arg_non_const</qualifiedname>
        <param>
          <type>R(C::*)(Args...)</type>
        </param>
        <param>
          <type><ref refid="namespaceamrex_1ad2e8127753e9be0ebf531435c6511937" kindref="member">int</ref></type>
          <declname>n</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/runner/work/amrex/amrex/Src/Base/AMReX_SIMD.H" line="156" column="20" bodyfile="/home/runner/work/amrex/amrex/Src/Base/AMReX_SIMD.H" bodystart="156" bodyend="160"/>
      </memberdef>
      <memberdef kind="function" id="namespaceamrex_1_1simd_1aa7fecc0588ed4b49a849a7ca8919ad61" prot="public" static="no" const="no" explicit="no" inline="yes" virt="non-virtual">
        <templateparamlist>
          <param>
            <type>typename T</type>
          </param>
          <param>
            <type>typename IndexType</type>
          </param>
        </templateparamlist>
        <type>__host__ __device__ decltype(auto)</type>
        <definition>__host__ __device__ decltype(auto) amrex::simd::load_1d</definition>
        <argsstring>(T *ptr, IndexType const i)</argsstring>
        <name>load_1d</name>
        <qualifiedname>amrex::simd::load_1d</qualifiedname>
        <param>
          <type>T *</type>
          <declname>ptr</declname>
        </param>
        <param>
          <type><ref refid="namespaceamrex_1a7e095993c9b3f5a4c2abddd839d800e2" kindref="member">IndexType</ref> const</type>
          <declname>i</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Load 1D contiguous data from array pointers</para>
<para>On GPU and CPU w/o SIMD, this dereferences a 1D array element at the index position i. On CPU with SIMD, this loads a SIMD register at the IndexType::width SIMD-wide index position i.</para>
<para><parameterlist kind="templateparam"><parameteritem>
<parameternamelist>
<parametername>T</parametername>
</parameternamelist>
<parameterdescription>
<para>data type (<ref refid="group__amrex__arithmetic__types_1ga1bb8e83c724a2a399a0129c904b4f7bd" kindref="member">amrex::ParticleReal</ref> or int or uint64_t) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>IndexType</parametername>
</parameternamelist>
<parameterdescription>
<para>int or amrex::SIMDindex&lt;SIMD_WIDTH, int&gt; </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ptr</parametername>
</parameternamelist>
<parameterdescription>
<para>pointer to the array data </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>i</parametername>
</parameternamelist>
<parameterdescription>
<para>index or SIMD index </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>a reference to the (scalar) data OR a new SIMD variable (register) loaded with data </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/runner/work/amrex/amrex/Src/Base/AMReX_SIMD.H" line="183" column="14" bodyfile="/home/runner/work/amrex/amrex/Src/Base/AMReX_SIMD.H" bodystart="183" bodyend="206"/>
      </memberdef>
      <memberdef kind="function" id="namespaceamrex_1_1simd_1a1ca22aa27b5f9017e8a674e648a7b2d8" prot="public" static="no" const="no" explicit="no" inline="yes" virt="non-virtual">
        <templateparamlist>
          <param>
            <type>auto</type>
            <declname>P_Method</declname>
            <defname>P_Method</defname>
          </param>
          <param>
            <type>int</type>
            <declname>N</declname>
            <defname>N</defname>
          </param>
          <param>
            <type>typename T</type>
          </param>
          <param>
            <type>typename IndexType</type>
          </param>
          <param>
            <type>typename ValType</type>
          </param>
        </templateparamlist>
        <type>__host__ __device__ void</type>
        <definition>__host__ __device__ void amrex::simd::store_1d</definition>
        <argsstring>(ValType const &amp;__restrict__ val, T *const __restrict__ ptr, IndexType const i)</argsstring>
        <name>store_1d</name>
        <qualifiedname>amrex::simd::store_1d</qualifiedname>
        <param>
          <type>ValType const &amp;__restrict__</type>
          <declname>val</declname>
        </param>
        <param>
          <type>T *const __restrict__</type>
          <declname>ptr</declname>
        </param>
        <param>
          <type><ref refid="namespaceamrex_1a7e095993c9b3f5a4c2abddd839d800e2" kindref="member">IndexType</ref> const</type>
          <declname>i</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Store SIMD register data back to a 1D contiguous array in RAM</para>
<para>On GPU and CPU without SIMD, this does nothing because we already modified the (global) RAM directly via pointer.</para>
<para>On CPU with SIMD, this performs a conditional writeback of a SIMD register to RAM (index in pointer array), but only if the argument was not passed as const and thus was likely changed.</para>
<para>Good optimizing compilers can eliminate writebacks of unchanged values themselves, but we better help a little for robustness. Background: <ulink url="https://github.com/AMReX-Codes/amrex/pull/4520#issuecomment-3064064215">https://github.com/AMReX-Codes/amrex/pull/4520#issuecomment-3064064215</ulink></para>
<para><parameterlist kind="templateparam"><parameteritem>
<parameternamelist>
<parametername>P_Method</parametername>
</parameternamelist>
<parameterdescription>
<para>pointer to the method that used the data (for is_nth_arg_non_const) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>N</parametername>
</parameternamelist>
<parameterdescription>
<para>the argument index (for is_nth_arg_non_const) </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>T</parametername>
</parameternamelist>
<parameterdescription>
<para>data type </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>IndexType</parametername>
</parameternamelist>
<parameterdescription>
<para>int or SIMD index </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>ValType</parametername>
</parameternamelist>
<parameterdescription>
<para>the type of the value to store </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>val</parametername>
</parameternamelist>
<parameterdescription>
<para>the value to store </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>ptr</parametername>
</parameternamelist>
<parameterdescription>
<para>pointer to contiguous 1D array data </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>i</parametername>
</parameternamelist>
<parameterdescription>
<para>index or SIMD index </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/runner/work/amrex/amrex/Src/Base/AMReX_SIMD.H" line="232" column="10" bodyfile="/home/runner/work/amrex/amrex/Src/Base/AMReX_SIMD.H" bodystart="232" bodyend="253"/>
      </memberdef>
    </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <location file="/home/runner/work/amrex/amrex/Src/Base/AMReX_SIMD.H" line="21" column="1"/>
  </compounddef>
</doxygen>
